<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

<meta property="og:title" content="SPItorch documentation" />
  
<meta property="og:type" content="website" />
  
<meta property="og:url" content="index.html" />
  
<meta property="og:description" content="If you’re looking for installation instructions, please see the installation page. Here is a link to the GitHub Repo. This is a fork of the original SPItorch project by Mike Walmsey and collaborato..." />
  <link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="1. Installation Guide" href="installation.html" />

    <link rel="shortcut icon" href="_static/favicon-32x32.png"/><meta name="generator" content="sphinx-4.5.0, furo 2022.04.07"/>
        <title>SPItorch</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?digest=68f4518137b9aefe99b631505a2064c3c42c9852" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="#"><div class="brand">SPItorch</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="#">
  
  
  <span class="sidebar-brand-text">SPItorch</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">1. Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_usage.html">2. Basic Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="sampling.html">3. Photometry Sampling</a></li>
<li class="toctree-l1"><a class="reference internal" href="inference.html">4. Inference Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="san_inference.html">5. Inferring Galaxy Parameters (SAN)</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container"><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="spitorch-documentation">
<h1>SPItorch documentation<a class="headerlink" href="#spitorch-documentation" title="Permalink to this headline">#</a></h1>
<hr class="docutils"/>
<p>If you’re looking for installation instructions, please see the <a class="reference external" href="installation.html">installation</a> page.</p>
<p>Here is a link to the <a class="reference external" href="https://github.com/MaximeRobeyns/SPItorch">GitHub Repo</a>.</p>
<hr class="docutils"/>
<p>This is a fork of the original SPItorch project by Mike Walmsey and
collaborators, which aims to use (conditional) generative modelling techniques to
map from photometry to distributions over physical parameters <span class="math notranslate nohighlight">\(\theta\)</span>.</p>
<p>There are broadly two components:</p>
<ol class="arabic">
<li><p><strong>Simulation and Dataset Creation</strong></p>
<p>The first section is for <em>simulation</em>, where you can create a dataset
of simulated <span class="math notranslate nohighlight">\((\text{galaxy parmeter}, \text{photometry})\)</span> pairs.
This uses <a class="reference external" href="https://ui.adsabs.harvard.edu/abs/2021ApJS..254...22J/abstract">Prospector</a> behind the
scenes, and should be the first step if you are installing and running this
repository for the first time.</p>
<p>See the <a class="reference external" href="/sampling.html">Photometry Sampling</a> section for more details about
this stage.</p>
</li>
<li><p><strong>Inference</strong></p>
<p>In this second section of the codebase we deal with the task of estimating
the distribution over physical galaxy parameters, which we denote
<span class="math notranslate nohighlight">\(\mathbf{y}\)</span>, given photometric observations <span class="math notranslate nohighlight">\(\mathbf{x}\)</span>; that
is, estimating
<span class="math notranslate nohighlight">\(p(\mathbf{y} \vert \mathbf{x})\)</span>.</p>
<p>This is a standard supervised machine learning setup. There are several
candidate models in the codebase, and the code has been structured such that
it is easy to implement new models, and compare them to the existing methods.</p>
<p>To see how to do this, and for an overview of the existing models, please
read the <a class="reference external" href="/inference.html">Inference</a> page.</p>
</li>
</ol>
<section id="configurations">
<h2>Configurations<a class="headerlink" href="#configurations" title="Permalink to this headline">#</a></h2>
<p>Configurations for the project are set in <code class="docutils literal notranslate"><span class="pre">spt/config.py</span></code>, not through command
line arguments.</p>
</section>
<section id="miscellaneous">
<h2>Miscellaneous<a class="headerlink" href="#miscellaneous" title="Permalink to this headline">#</a></h2>
<p>We use <a class="reference external" href="https://www.python.org/dev/peps/pep-0484/">type hints</a> throughout the
code to allow for static type checking using <a class="reference external" href="http://mypy-lang.org/">mypy</a>. In
general this helps to catch bugs, and makes it clearer to folks unfamiliar with
the code what an object is, or what a function is doing.</p>
<p>Tests are written using <a class="reference external" href="https://pytest.org">pytest</a>.</p>
<div class="toctree-wrapper compound">
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">1. Installation Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="installation.html#quickstart">1.1. Quickstart</a><ul>
<li class="toctree-l3"><a class="reference internal" href="installation.html#troubleshooting">1.1.1. Troubleshooting</a></li>
<li class="toctree-l3"><a class="reference internal" href="installation.html#optional-steps">1.1.2. Optional Steps</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#manual-installation">1.2. Manual Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#writing-documentation">1.3. Writing Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#building-python-3-10">1.4. Building Python 3.10</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#anaconda">1.5. Anaconda</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="basic_usage.html">2. Basic Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="basic_usage.html#generating-a-training-dataset">2.1. Generating a Training Dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="basic_usage.html#training-a-model-san">2.2. Training a Model (SAN)</a></li>
<li class="toctree-l2"><a class="reference internal" href="basic_usage.html#inferring-parameters">2.3. Inferring Parameters</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="sampling.html">3. Photometry Sampling</a><ul>
<li class="toctree-l2"><a class="reference internal" href="sampling.html#forward-model-configuration">3.1. Forward Model Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="sampling.html#running-the-sampling-procedure">3.2. Running the Sampling Procedure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="sampling.html#free-parameter-configurations">3.2.1. Free Parameter Configurations</a></li>
<li class="toctree-l3"><a class="reference internal" href="sampling.html#sampling-parameters">3.2.2. Sampling Parameters</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="inference.html">4. Inference Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="inference.html#using-the-models">4.1. Using the Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="inference.html#forwardmodelparameters">4.2. ForwardModelParameters</a><ul>
<li class="toctree-l3"><a class="reference internal" href="inference.html#general-inference-parameters">4.2.1. General Inference Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="inference.html#model-parameters">4.2.2. Model Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="inference.html#training-the-models">4.2.3. Training the models</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="inference.html#creating-new-models">4.3. Creating New Models</a><ul>
<li class="toctree-l3"><a class="reference internal" href="inference.html#estimating-parameters">4.3.1. Estimating Parameters</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="san_inference.html">5. Inferring Galaxy Parameters (SAN)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="san_inference.html#autoregressive-models-for-distribution-estimation">5.1. Autoregressive Models for Distribution Estimation</a></li>
<li class="toctree-l2"><a class="reference internal" href="san_inference.html#the-sequential-autoregressive-network">5.2. The Sequential Autoregressive Network</a><ul>
<li class="toctree-l3"><a class="reference internal" href="san_inference.html#using-the-san-model">5.2.1. Using the SAN Model</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="san_inference.html#references">5.3. References</a></li>
</ul>
</li>
</ul>
</div>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="installation.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title"><span class="section-number">1. </span>Installation Guide</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2022
            </div>
            Made with 
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">SPItorch documentation</a><ul>
<li><a class="reference internal" href="#configurations">Configurations</a></li>
<li><a class="reference internal" href="#miscellaneous">Miscellaneous</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/scripts/furo.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    </body>
</html>